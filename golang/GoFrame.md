# GoFrame框架
## 模块化设计
* golang中将package称作模块
* 模块化目的：解耦和复用
* 模块化原则
  * REP 复用/发布等同原则：要复用一段代码就把它抽成模块
  * CCP 共同闭包原则：维护性》可复用性，同时修改的类放在一个模块中
  * CRP 共同复用原则：去掉模块中不需要的依赖
* 模块分层：自上而下
  * 业务实现模块：特定业务项目逻辑实现，这里包含业务项目进一步的代码分层。
  * 通用业务模块：可复用的业务逻辑封装，例如微信公众号/小程序、CMS/CRM、区块链等相关业务逻辑封装模块。
  * 通用基础模块：标准库不提供或者基于标准库封装扩展的基础模块，例如：配置、校验、缓存、ORM、I18N等等。
  * 标准基础模块：Golang标准库。
## 代码分层设计
* UI：表示层，WEB界面/API接口
* BLL：业务逻辑层，
* DAL：数据访问层，DB的增删改查
* Model：模型定义层，数据库表的映射对象
* 目录：

一级目录|二级目录|三级目录|说明|描述
:--|:--|:--|:--|:--
api|-|-|接口定义|对外提供服务的输入/输出数据结构定义。考虑到版本管理需要，往往以apiv1/apiv2...存在。
internal|-|-|内部逻辑|业务逻辑存放目录。通过Golang internal特性对外部隐藏可见性。
-|cmd|-|入口指令|命令行管理目录。可以管理维护多个命令行。
-|consts|-|常量定义|项目所有常量定义。
-|handler|-|接口处理|接收/解析用户输入参数的入口/接口层。
-|model|-|结构模型|数据结构管理模块，管理数据实体对象，以及输入与输出数据结构定义。
-|-|entity|数据模型|数据模型是模型与数据集合的一对一关系，由工具维护，用户不能修改。
-|service|-|逻辑封装|业务逻辑封装管理，特定的业务逻辑实现和封装。
-|-|dao|数据访问|数据访问对象，这是一层抽象对象，用于和底层数据库交互，仅包含最基础的CURD方法
-|-|dto|数据转换|数据转换模型。用于业务模型到数据模型的转换，由工具维护，用户不能修改。
manifest|-|-|交付清单|包含程序编译、部署、运行、配置的文件。常见内容如下：
-|config|-|配置管理|配置文件存放目录。
-|docker|-|镜像文件|Docker镜像相关依赖文件，脚本文件等等。
-|deploy|-|部署文件|部署相关的文件。默认提供了Kubernetes集群化部署的Yaml模板，通过kustomize管理。
resource|-|-|静态资源|静态资源文件。这些文件往往可以通过 资源打包/镜像编译 的形式注入到发布文件中。
go.mod|-|-|依赖管理|使用Go Module包管理的依赖描述文件。
main.go|-|-|入口文件|程序入口文件。


## 对象封装设计
* 业务包命名约束
  * 四个业务包名：api、dao、model、service，包对外的公开对象采用业务领域名称来命名，包内部的数据结构定义采用业务领域名称+分层名称来命名，其中分层名称一般为api或service，例如：包内，package api var Ask=ask{} type ask struct{}，包外访问，api.Ask
* model数据结构：层级中的代码仅包含数据结构定义，不包含任何的方法封装，例：type ContentApiDoUpdateReq struct{}//api执行修改内容
* dao数据访问：只能北service调用
* 对象访问：以非指针方式访问对象，内部属性小写，外部通过公开方法访问

## 数据模型和业务模型
* 数据模型统：Mysql，redis，MongoDB等数据库数据结构，由GoFrame框架中的cli工具统一维护，位于/internal/model/entity目录下
* 业务模型：接口输入/输出模型 与 业务输入/输出模型，由model模型层统一管理，
* 接口输入/输出模型命名：XxxReq或XxxRes，例：type RegisterDoReq struct{}
* 业务输入/输出模型命名：XxxInput或XxxOutput，例：type UserLoginInput struct{}
* 特殊的业务模型DTO：介于业务和数据之间

## 隐式与显式初始化
* 隐式初始化：通过包内的init()
* 显示初始化：在main()或其他初始化代码中显式调用，为了方便维护，一般选择显式初始化





